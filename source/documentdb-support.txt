.. _documentdb-support:

================================
Amazon DocumentDB Supportability
================================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1

.. figure:: /figures/documentdb.png
   :alt: Amazon DocumentDB logo

`Amazon DocumentDB <https://docs.aws.amazon.com/documentdb/latest/developerguide/what-is.html>`__
(with MongoDB compatibility) is a fast, reliable, and fully managed
database service. Amazon DocumentDB makes it easy to set up, operate, and scale
MongoDB-compatible databases in the cloud. With Amazon DocumentDB, you can run the same
application code and use the same drivers and tools that you use with MongoDB.

Version Information
-------------------

Amazon DocumentDB currently supports MongoDB 4.0 and MongoDB 5.0. These are several
major versions behind what `MongoDB Atlas <https://www.mongodb.com/docs/atlas/>`__
currently offers (see `MongoDB Evolved â€“ Version History <https://www.mongodb.com/evolved>`__
for more information), and as a result are lacking support for newer features and
functionality.

Compatibility
-------------

AWS outlines to what degree DocumentDB is
`compatible with MongoDB 4.0 and MongoDB 5.0. <https://docs.aws.amazon.com/documentdb/latest/developerguide/compatibility.html#mongodb-50>`__
There is additional documentation that lays out the functional differences between
`AWS DocumentDB and MongoDB. <https://docs.aws.amazon.com/documentdb/latest/developerguide/functional-differences.html>`__

A convenient list of tables of the
`supported MongoDB APIs, operations, and data types <https://docs.aws.amazon.com/documentdb/latest/developerguide/mongo-apis.html>`__
can also be found, but to summarize the following are either only available in a limited
capacity or not supported by DocumentDB:

- Features: `Capped collections <https://www.mongodb.com/docs/manual/core/capped-collections/>`__,
  `Map-Reduce <https://www.mongodb.com/docs/v7.0/core/map-reduce/>`__,
  `GridFS <https://www.mongodb.com/docs/manual/core/gridfs/>`__,
  `Text Indexes <https://www.mongodb.com/docs/manual/core/indexes/index-types/index-text/>`__,
  `Partial Indexes <https://www.mongodb.com/docs/manual/core/index-partial/>`__,
  `Case-Insensitive Indexes <https://www.mongodb.com/docs/manual/core/index-case-insensitive/>`__
- Commands: ``collMod``, ``createView``, ``filemd5``, ``reIndex``, ``connPoolStats``,
  ``dbHash``, ``features``, Sharding commands (aside from ``enableSharding`` and
  ``shardCollection``)
- Query Operators: ``$expr``, ``$text``, ``$where``, ``$meta``, ``$box``, ``$center``,
  ``$centerSphere``, ``$polygon``, ``$near``
- Aggregation Operators: ``$accumulator``, ``$count``, ``$ceil``, ``$exp``, ``$floor``,
  ``$ln``, ``$log``, ``$log10``, ``$pow``, ``$sqrt``, ``$trunc``, ``$round``, ``$first``,
  ``$last``, ``$switch``, ``$binarySize``, ``$bsonSize``, ``$dateFromParts``,
  ``$dateToParts``, ``$dateTrunc``, ``$dateDiff``, ``$setDifference``, ``$anyElementTrue``,
  ``$allElementsTrue``, ``$ltrim``, ``$rtrim``, ``$trim``, ``$regexFind``,
  ``$regexFindAll``, ``$regexMatch``, ``$replaceOne``, ``$replaceAll``, ``$convert``,
  ``$toBool``, ``$toDate``, ``$toDecimal``, ``$toDouble``, ``$toInt``, ``$toLong``,
  ``$toObjectId``, ``$toString``, ``$isNumber``, ``$rand``, ``$sampleRate``, ``$getField``
- Aggregation Stages: ``$collStats``, ``$facet``, ``$bucket``, ``$bucketAuto``,
  ``$sortByCount``, ``$listLocalSessions``, ``$listSessions``, ``$graphLookup``

From the `Amazon DocumentDB / MongoDB compatibility tester site <https://www.isdocumentdbreallymongodb.com/>`__, as of November, 2023
DocumentDB appears to only be 33.84% compatible (based on the MongoDB API Tester).

Support
-------
MongoDB does not offer commercial support for AWS DocumentDB. For assistance with this product specifically AWS Support should be contacted directly.
